
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="js/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <!--
  Author:  Zhizhou Li <lzz@meteroi.com>
 
  Copyright 2015 Meteroi
    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.
    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.
    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->
  
    <title>Editor</title>
    <style type="text/css" media="screen">
        .ace_editor {
            position: relative !important;
            border: 1px solid lightgray;
            margin: 0;
            height: 600px;
            width: 100%;
        }
        
        .ace_editor.fullScreen {
            height: auto;
            width: auto;
            border: 0;
            margin: 0;
            position: fixed !important;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 10;
            background: white;
        }
        
        .fullScreen {
            overflow: hidden
        }
        
        .scrollmargin {
            height: inherit;
            text-align: left;
        }
    </style>
    <script src="blockly/blockly_compressed.js"></script>
    <script src="blockly/blocks_compressed.js"></script>
    <script src="blockly/javascript_compressed.js"></script>
    <script src="blockly/msg/js/en.js"></script>
    <script src="rgb_led.js"></script>
    <script src="wait.js"></script>

</head>

<body>
    <img id=broadpic alt="">
    <div id="IDE" class="">
        <a href="#savedialog" role="button" class="btn" data-toggle="modal" title="save the program">save</a>
        <span onclick="runCode()" class="btn btn-success" title="run the program">
    run
  </span>
        <span onclick="showCode()" class="btn btn-warning" title="stop the progrtam">
    stop
  </span>
        <a href="#api_doc" role="button" class="btn btn-info" data-toggle="modal" onclick="load_api()" title="show the API">API</a>
        <a href="docs/index.html" role="button" class="btn btn-info" data-toggle="modal" title="show the docs">docs</a>
        <span onclick="saveXML()" class="btn btn-danger" title="reboot the broad">
    reboot
  </span>
        <span>
  <div class="btn-group">
<button type="button" class="btn btn-primary" title="change the broad configuration">
Configurations
</button>
<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
    <span class="caret"></span>
        </button>
        <ul id=version_list class="dropdown-menu" role="menu">
        </ul>
        <span onclick="fpga()" class="btn btn-info" title="go to the fpga designer">
    FPGAdesigner
  </span>
    </div>
    </span>

  <div id="blocklyDiv" style="height: 480px;"></div>

 <!-- Blockly toolbox -->
  <xml id="toolbox" style="display: none">
    <category name="Logic" colour="210">
      <block type="logic_compare"></block>
      <block type="logic_operation"></block>
      <block type="logic_negate"></block>
      <block type="logic_boolean"></block>
      <block type="logic_ternary"></block>
    </category>
    <category name="Control" colour="120">    
      <block type="wait">
        <value name="seconds">
          <block type="math_number">
            <title name="NUM">1</title>
          </block>
        </value>
      </block>  
      <block type="controls_repeat_ext">
        <value name="TIMES">
          <block type="math_number">
            <title name="NUM">10</title>
          </block>
        </value>
      </block>
      <block type="controls_whileUntil"></block>
      <block type="controls_for">
        <value name="FROM">
          <block type="math_number">
            <title name="NUM">1</title>
          </block>
        </value>
        <value name="TO">
          <block type="math_number">
            <title name="NUM">10</title>
          </block>
        </value>
        <value name="BY">
          <block type="math_number">
            <title name="NUM">1</title>
          </block>
        </value>
      </block>
      <block type="controls_forEach"></block>
      <block type="controls_flow_statements"></block>
    </category>    
    <category name="Math" colour="230">
      <block type="math_number">
        <title name="NUM">0</title>
      </block>
      <block type="math_arithmetic">
        <title name="OP">ADD</title>
      </block>
      <block type="math_single">
        <title name="OP">ROOT</title>
      </block>
      <block type="math_trig">
        <title name="OP">SIN</title>
      </block>
      <block type="math_constant">
        <title name="CONSTANT">PI</title>
      </block>
      <block type="math_number_property">
        <mutation divisor_input="false"></mutation>
        <title name="PROPERTY">EVEN</title>
      </block>
      <block type="math_change">
        <title name="VAR">item</title>
        <value name="DELTA">
          <block type="math_number">
            <title name="NUM">1</title>
          </block>
        </value>
      </block>
      <block type="math_round">
        <title name="OP">ROUND</title>
      </block>
      <block type="math_on_list">
        <title name="OP">SUM</title>
      </block>
      <block type="math_modulo"></block>
      <block type="math_constrain" >
        <value name="LOW">
          <block type="math_number">
            <title name="NUM">1</title>
          </block>
        </value>
        <value name="HIGH">
          <block type="math_number">
            <title name="NUM">100</title>
          </block>
        </value>
      </block>
      <block type="math_random_int">
        <value name="FROM">
          <block type="math_number">
            <title name="NUM">1</title>
          </block>
        </value>
        <value name="TO">
          <block type="math_number">
            <title name="NUM">100</title>
          </block>
        </value>
      </block>
      <block type="math_random_float"></block>
    </category>
    <category name="Text" colour="160">
      <block type="text_print" inline="false">
       <value name="TEXT">
          <shadow type="text">
            <field name="TEXT">Openfpgaduino</field>
          </shadow>
        </value>
      </block>
      <block type="text"  >
        <title name="TEXT"></title>
      </block>
      <block type="text_join" inline="false"  >
        <mutation items="2"></mutation>
      </block>
      <block type="text_append" inline="false"  >
        <title name="VAR">item</title>
        <value name="TEXT">
          <block type="text">
            <title name="TEXT"></title>
          </block>
        </value>
      </block>
      <block type="text_length" inline="false"  ></block>
      <block type="text_isEmpty" inline="true"  ></block>
      <block type="text_indexOf" inline="true"  >
        <title name="END">FIRST</title>
        <value name="VALUE">
          <block type="variables_get">
            <title name="VAR">text</title>
          </block>
        </value>
      </block>
      <block type="text_charAt" inline="true"  >
        <mutation at="true"></mutation>
        <title name="WHERE">FROM_START</title>
        <value name="VALUE">
          <block type="variables_get">
            <title name="VAR">text</title>
          </block>
        </value>
      </block>
      <block type="text_getSubstring" inline="true"  >
        <mutation at1="true" at2="true"></mutation>
        <title name="WHERE1">FROM_START</title>
        <title name="WHERE2">FROM_START</title>
        <value name="STRING">
          <block type="variables_get">
            <title name="VAR">text</title>
          </block>
        </value>
      </block>
      <block type="text_changeCase" inline="false"  >
        <title name="CASE">UPPERCASE</title>
      </block>
      <block type="text_trim" inline="false"  >
        <title name="MODE">BOTH</title>
      </block>
    </category>
    <category name="Lists" colour="260">
      <block type="variables_set"><title name="VAR">list</title><value name="VALUE">
          <block type="lists_create_empty"  ></block>
      </value></block>
      <block type="variables_set"><title name="VAR">list</title><value name="VALUE">
        <block type="lists_create_with" inline="false"  >
          <mutation items="3"></mutation>
        </block>
      </value></block>
      <block type="variables_set"><title name="VAR">list</title><value name="VALUE">
        <block type="lists_repeat" inline="true"  >
          <value name="NUM">
            <block type="math_number">
              <title name="NUM">5</title>
            </block>
          </value>
        </block>
      </value></block>
      <block type="lists_length" inline="false"  ></block>
      <block type="lists_isEmpty" inline="true"  ></block>
      <block type="lists_indexOf" inline="true"  >
        <title name="END">FIRST</title>
        <value name="VALUE">
          <block type="variables_get">
            <title name="VAR">list</title>
          </block>
        </value>
      </block>
      <block type="lists_getIndex" inline="true"  >
        <mutation statement="false" at="true"></mutation>
        <title name="MODE">GET</title>
        <title name="WHERE">FROM_START</title>
        <value name="VALUE">
          <block type="variables_get">
            <title name="VAR">list</title>
          </block>
        </value>
      </block>
      <block type="lists_setIndex" inline="true"  >
        <mutation at="true"></mutation>
        <title name="MODE">SET</title>
        <title name="WHERE">FROM_START</title>
        <value name="LIST">
          <block type="variables_get">
            <title name="VAR">list</title>
          </block>
        </value>
      </block>
      <block type="lists_getSublist" inline="true"  >
        <mutation at1="true" at2="true"></mutation>
        <title name="WHERE1">FROM_START</title>
        <title name="WHERE2">FROM_START</title>
        <value name="LIST">
          <block type="variables_get">
            <title name="VAR">list</title>
          </block>
        </value>
      </block>
    </category>   
    <category name="Variables" colour="330">
      <block type="variables_set" inline="false"  >
        <title name="VAR">item</title>
      </block>
      <block type="variables_get"  >
        <title name="VAR">item</title>
      </block>    
    </category>
    <category name="Functions" custom="PROCEDURE" colour="290"></category>
    <sep></sep>
    <category name="Openfpgaduino" colour="260">
      <block type="rgb_led">
        <value name="r">
          <block type="math_number">
            <title name="NUM">255</title>
          </block>
        </value>
        <value name="g">
          <block type="math_number">
            <title name="NUM">255</title>
          </block>
        </value>
        <value name="b">
          <block type="math_number">
            <title name="NUM">255</title>
          </block>
        </value>
      </block>
    </category>
  </xml>

    <!-- Blockly initial code -->
<xml id="startBlocks" style="display: none">
  <block type="controls_repeat_ext" id="6X!yQi-9Y*,*Rg*]Mn:9" x="84" y="98">
    <value name="TIMES">
      <block type="math_number" id="`+7#Js@(:sJv%/}SG^J?">
        <field name="NUM">3</field>
      </block>
    </value>
    <statement name="DO">
      <block type="rgb_led" id="*=4RJ{}oGXB/[TTt=MNm">
        <field name="led">1</field>
        <value name="r">
          <block type="math_number" id="fLmHOFx7Ipk8,MjD]Jlt">
            <field name="NUM">255</field>
          </block>
        </value>
        <value name="g">
          <block type="math_number" id="D/R}nES:u8/usACh@fe;">
            <field name="NUM">0</field>
          </block>
        </value>
        <value name="b">
          <block type="math_number" id="UAe|Rbm-J}3H*t)G;*WP">
            <field name="NUM">0</field>
          </block>
        </value>
        <next>
          <block type="wait" id=")iud1+8*JL^fqN11]_Y%">
            <value name="seconds">
              <block type="math_number" id="NZ@G+87cdzI`0?7Ff.3K">
                <field name="NUM">1</field>
              </block>
            </value>
            <next>
              <block type="rgb_led" id="5M=l.#W!vhvpy%gjZpOs">
                <field name="led">1</field>
                <value name="r">
                  <block type="math_number" id="`?}eN7Kd):2gQPL)`[cV">
                    <field name="NUM">0</field>
                  </block>
                </value>
                <value name="g">
                  <block type="math_number" id="X*Z*6wK.1EMq6A)q?|!=">
                    <field name="NUM">255</field>
                  </block>
                </value>
                <value name="b">
                  <block type="math_number" id="2{ZA2h*10FlwPApvbZVi">
                    <field name="NUM">0</field>
                  </block>
                </value>
                <next>
                  <block type="wait" id="^lJ_(bg*4syWo1jru]7F">
                    <value name="seconds">
                      <block type="math_number" id="4Pz{ux4ZS`?NXMyb~/bd">
                        <field name="NUM">1</field>
                      </block>
                    </value>
                    <next>
                      <block type="rgb_led" id="|j=pec5W+l%vI9#uQvfn">
                        <field name="led">1</field>
                        <value name="r">
                          <block type="math_number" id="/H.HG:8e,*SDx=[({DT1">
                            <field name="NUM">0</field>
                          </block>
                        </value>
                        <value name="g">
                          <block type="math_number" id="phF.l!:cskzhFncZDp[J">
                            <field name="NUM">0</field>
                          </block>
                        </value>
                        <value name="b">
                          <block type="math_number" id="mEDv!8Qfo[6oSw:4.h([">
                            <field name="NUM">255</field>
                          </block>
                        </value>
                        <next>
                          <block type="wait" id="8c-n?KI]yWP{h%kF}S,a">
                            <value name="seconds">
                              <block type="math_number" id="2jxR8o!loD(HltJ#B6or">
                                <field name="NUM">1</field>
                              </block>
                            </value>
                          </block>
                        </next>
                      </block>
                    </next>
                  </block>
                </next>
              </block>
            </next>
          </block>
        </next>
      </block>
    </statement>
  </block>
</xml>

  <script>
    var workspace = Blockly.inject('blocklyDiv',
        {media: 'blockly/media/',
         toolbox: document.getElementById('toolbox')});
    Blockly.Xml.domToWorkspace(document.getElementById('startBlocks'),
                               workspace);

    function showCode() {
      // Generate JavaScript code and display it.
      Blockly.JavaScript.INFINITE_LOOP_TRAP = null;
      var code = Blockly.JavaScript.workspaceToCode(workspace);
      alert(code);
    }

    function runCode() {
      // Generate JavaScript code and run it.
      window.LoopTrap = 1000;
      Blockly.JavaScript.INFINITE_LOOP_TRAP =
          'if (--window.LoopTrap == 0) throw "Infinite loop.";\n';
      var code = Blockly.JavaScript.workspaceToCode(workspace);
      Blockly.JavaScript.INFINITE_LOOP_TRAP = null;
      try {
        eval(code);
      } catch (e) {
        alert(e);
      }
    }
    
     function saveXML() {
      // Generate XML code and display it.
      var dom = Blockly.Xml.workspaceToDom(workspace);
      var xml = Blockly.Xml.domToPrettyText(dom);
      alert(xml);
    }
  </script>

    </div>
    <div id=Ex>
    </div>
    <div class="panel panel-default">
        <span onclick="clean_error()" class="btn btn-warning" title="clear the error log">
    Clear error
	</span>
        <div class="panel-heading">
            <a data-toggle="collapse" data-parent="#accordion" href="#error">
                <div class="alert alert-error" role="alert"><b>Error</b>
                </div>
            </a>
        </div>
        <div id="error" class="panel-collapse collapse in">
        </div>
    </div>
    </div>
    <div>

        <div class="panel panel-default">
            <span onclick="clean_console()" class="btn btn-warning" title="clear the console log">
    Clear console
	</span>
            <div class="panel-heading">
                <a data-toggle="collapse" data-parent="#accordion" href="#console">
                    <div class="alert alert-info" role="alert"><b>Console</b>
                    </div>
                </a>
            </div>
            <div id="console" class="panel-collapse collapse in">
            </div>
        </div>
    </div>
    <div>

        <!-- Save file dialog -->
        <div class="modal hide fade" id="savedialog">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h3>Save the program</h3>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <input id="dialog_filename" type="text" class="form-control" placeholder="filename">
                    <span class="input-group-addon">.c</span>
                </div>
            </div>
            <div class="modal-footer">
                <a href="#" data-dismiss="modal" class="btn">close</a>
                <a href="#" data-dismiss="modal" class="btn btn-primary" onclick="save()">save</a>
            </div>
        </div>

        <!-- pop dialog -->
        <div class="modal hide fade" id="popdialog">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h3>Are you sure to delete?</h3>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <p id="pop_message"></p>
                </div>
            </div>
            <div class="modal-footer">
                <a href="#" data-dismiss="modal" class="btn">No</a>
                <a href="#" data-dismiss="modal" class="btn btn-primary" onclick="do_delete_example()">Yes</a>
            </div>
        </div>

        <!-- API reference doc-->
        <div id="api_doc" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="ModalLabel">API Reference Document</h3>
            </div>
            <div class="modal-body">
                <div class="panel-group" id="accordion">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapse1">
                                <div class="alert alert-info" role="alert"><b>void led(int id, char r, char g, char b)</b></div>
                            </a>
                        </div>
                        <div id="collapse1" class="panel-collapse collapse">
                            <div class="panel-body">
                                <p>Functionality: Sleep for seconds</p>
                                <p>Argument: </p>
                                <p>id: The id of led can be 0-3</p>
                                <p>r: The red color of led</p>
                                <p>g: The greem color of led</p>
                                <p>b: The blue color of led</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn" data-dismiss="modal" aria-hidden="true">close</button>
                </div>
            </div>

            <script src="./ace/ace.js" type="text/javascript" charset="utf-8"></script>
            <script>
                var debug = false;

                function debuginf(string) {
                    if (debug == true) {
                        console.log(string);
                    }
                }

                function ajax_rest_post(url, arg1, arg2) {
                    var xhr = new XMLHttpRequest();
                    var post;
                    xhr.open("post", url, false);
                    xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded")
                    if (arg1 != undefined)
                        post = encodeURIComponent("arg1") + "=" + encodeURIComponent(arg1) + "&";
                    else
                        post = null;
                    if (arg2 != undefined)
                        post += encodeURIComponent("arg2") + "=" + encodeURIComponent(arg2) + "&";
                    xhr.send(post);
                    debuginf(xhr.status);
                }

                function load_config_list() {
                    var xhr = new XMLHttpRequest();
                    xhr.open("get", "load_config", false);
                    xhr.send();
                    var versionlist = xhr.responseText;
                    debuginf(versionlist);
                    var list = versionlist.split(',');
                    var html_list = "";
                    debuginf(list);
                    for (var index in list) {
                        debuginf(list[index]);
                        var name = list[index].split('.')[0];
                        var ext = list[index].split('.')[1];
                        if (ext == 'rbf') {
                            html_list += "<li><a href='#' onClick= configrations(event)>" +
                                name + "</a></li>";
                        }
                    }
                    document.getElementById("version_list").innerHTML = html_list;
                }

                function load_example_list() {
                    var xhr = new XMLHttpRequest();
                    xhr.open("get", "load_example", false);
                    xhr.send();
                    var examplelist = xhr.responseText;
                    var list = examplelist.split(',');
                    var html_list = "";
                    debuginf(list);
                    for (var index in list) {
                        debuginf(list[index]);
                        var name = list[index].split('.')[0];
                        var ext = list[index].split('.')[1];
                        if (ext == 'c') {
                            html_list += "<span id=" + name + " onmousedown='mousedown(event)' onmouseup='mouseup(event)' class='btn btn-info'>" + name + "</span>";
                        }
                    }
                    document.getElementById("Ex").innerHTML = html_list;
                }

                function is_function_type(str) {
                    var re = new RegExp("\\.*\\s([^\\(\\s]+)\\(.*\\);");
                    return str.match(re);
                }

                function is_comments(str) {
                    var re = new RegExp(".*//(.*)");
                    return str.match(re);
                }

                function load_api() {
                    var xhr = new XMLHttpRequest();
                    xhr.open("get", "api/openfpgaduino.h", false);
                    xhr.send();
                    var api_doc = xhr.responseText;
                    debuginf(api_doc);
                    var api_doc_lines = api_doc.split('\n');
                    debuginf(api_doc_lines);
                    var html_list = "";
                    var i = 0,
                        j = 0;
                    var math;
                    var comments_html = "";
                    while (i < api_doc_lines.length) {
                        while (math = is_comments(api_doc_lines[i])) {
                            comments_html += '<p>' + math[1] + '</p>';
                            i++;
                        }
                        if (func = is_function_type(api_doc_lines[i])) {
                            html_list += '<div class="panel panel-default"> \
				<div class="panel-heading"> \
				<a data-toggle="collapse" data-parent="#accordion" href="#collapse' + j + '"> \
				<div class="alert alert-info" role="alert"><b>' + api_doc_lines[i] + '</b></div> \
				</a> \
				</div> \
				<div id="collapse' + j + '" class="panel-collapse collapse"> \
				<div class="panel-body">'
                            j++;
                            html_list += comments_html;
                            html_list +=
                                '</div> \
				</div> \
				</div>'
                            comments_html = "";
                            debuginf(func[1]);
                        }
                        i++;
                    }
                    debuginf(html_list);
                    document.getElementById("accordion").innerHTML = html_list;
                }

                var dom = require("ace/lib/dom");
                //add command to all new editor instaces
                require("ace/commands/default_commands").commands.push({
                    name: "Toggle Fullscreen",
                    bindKey: "F11",
                    exec: function(editor) {
                        dom.toggleCssClass(document.body, "fullScreen")
                        dom.toggleCssClass(editor.container, "fullScreen")
                        editor.resize()
                    }
                })

                // create first editor
                var editor = ace.edit("editor");
                editor.setTheme("ace/theme/tomorrow");
                editor.session.setMode("ace/mode/c_cpp");

                // event handle for webpage
                function save() {
                    var code = editor.getValue();
                    var file = document.getElementById("dialog_filename").value;
                    debuginf("save");
                    if (file != "") {
                        ajax_rest_post("save", file, code);
                        load_example_list();
                        return true;
                    } else
                        return false;
                }

                function run() {
                    var code = editor.getValue();
                    debuginf("run");
                    debuginf(code);
                    ajax_rest_post("run", code);
                }

                function stop() {
                    debuginf("stop");
                    ajax_rest_post("stop");
                }

                function reboot() {
                    debuginf("reboot");
                    ajax_rest_post("reboot");
                }

                function configrations(event) {
                    var version = event.srcElement.innerText;
                    document.getElementById('broadpic').src = 'config/' + version + '.jpg';
                    debuginf("configrations");
                    debuginf(version);
                    ajax_rest_post("config", version);
                }

                function fpga() {
                    window.location.port = 8686;
                }

                function load_example(event) {
                    var example = event.srcElement.innerText;
                    debuginf(example);
                    var file = example + '.c';
                    debuginf("load code");
                    var xhr = new XMLHttpRequest();
                    xhr.open("get", "program/" + file, false);
                    xhr.send();
                    var get = xhr.responseText;
                    debuginf(get);
                    editor.setValue(get);
                    editor.clearSelection();
                }


                var timer = null;

                function mousedown(event) {
                    load_example(event);
                    timer = setTimeout(function() {
                        delete_example(event)
                    }, 1500); //set the timeout
                };

                function mouseup(event) {
                    clearTimeout(timer);
                };

                function delete_example(event) {
                    var file = event.srcElement.innerText;
                    debuginf(file);
                    document.getElementById("pop_message").innerText = file;
                    $("#popdialog").modal();
                }

                function do_delete_example() {
                    file = document.getElementById("pop_message").innerText;
                    debuginf("do delete code");
                    debuginf(file);
                    ajax_rest_post("delete", file);
                    load_example_list();
                }

                function clean_console() {
                    document.getElementById("console").innerHTML = " ";
                };

                function clean_error() {
                    document.getElementById("error").innerHTML = " ";
                };

                function console_polling() {
                    var xhr = new XMLHttpRequest();
                    xhr.open("get", "console", false);
                    xhr.send();
                    var get = xhr.responseText;
                    get = get.replace(/\n/gi, '</p><p>');
                    get = get.replace(/\r/gi, '</p><p>');
                    document.getElementById("console").innerHTML += "<p>" + get + "<\p>";
                };
                setInterval(console_polling, 1000);

                function error_polling() {
                    var xhr = new XMLHttpRequest();
                    xhr.open("get", "error", false);
                    xhr.send();
                    var get = xhr.responseText;
                    get = get.replace(/\n/gi, '</p><p>');
                    get = get.replace(/\r/gi, '</p><p>');
                    document.getElementById("error").innerHTML += "<p>" + get + "<\p>";
                };
                setInterval(error_polling, 1000);

                function delay_refresh() {
                    window.location.reload();
                }

                function page_refresh() {
                    setTimeout('delay_refresh()', 60000);

                }

                window.onload = function() {
                    load_config_list();
                    load_example_list();
                }
            </script>

</body>

</html>